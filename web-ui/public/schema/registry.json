{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Claude Code Registry Schema",
  "description": "Schema for Claude Code subagents and commands registry",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "format": "uri",
      "description": "Reference to this schema for validation"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Registry version in semantic versioning format"
    },
    "lastUpdated": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last update"
    },
    "subagents": {
      "type": "array",
      "description": "Collection of available subagents",
      "items": {
        "$ref": "#/definitions/subagent"
      },
      "minItems": 1,
      "uniqueItems": true
    },
    "commands": {
      "type": "array",
      "description": "Collection of available commands",
      "items": {
        "$ref": "#/definitions/command"
      },
      "minItems": 1,
      "uniqueItems": true
    }
  },
  "required": ["$schema", "version", "lastUpdated", "subagents", "commands"],
  "additionalProperties": false,
  "definitions": {
    "subagent": {
      "type": "object",
      "description": "A Claude Code subagent definition",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z0-9-]+$",
          "description": "Unique identifier for the subagent (lowercase, hyphen-separated)"
        },
        "category": {
          "type": "string",
          "enum": [
            "development-architecture",
            "language-specialists",
            "infrastructure-operations",
            "quality-security",
            "data-ai",
            "specialized-domains",
            "crypto-trading",
            "business-finance",
            "design-experience",
            "blockchain-web3",
            "sales-marketing"
          ],
          "description": "Category for organizing the subagent"
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 500,
          "description": "Clear description of when this subagent should be invoked"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Subagent version in semantic versioning format"
        },
        "file": {
          "type": "string",
          "pattern": "^subagents/[a-z0-9-]+\\.md$",
          "description": "Relative path to the subagent file"
        },
        "tools": {
          "type": "array",
          "description": "List of allowed tools for this subagent",
          "items": {
            "type": "string"
          }
        },
        "path": {
          "type": "string",
          "pattern": "^[a-z0-9-]+\\.md$",
          "description": "Filename of the subagent"
        }
      },
      "required": ["name", "category", "description", "version", "file", "tools", "path"],
      "additionalProperties": false
    },
    "command": {
      "type": "object",
      "description": "A Claude Code command definition",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z0-9-]+$",
          "description": "Unique identifier for the command (lowercase, hyphen-separated)"
        },
        "category": {
          "type": "string",
          "enum": [
            "ci-deployment",
            "code-analysis-testing",
            "context-loading-priming",
            "documentation-changelogs",
            "project-task-management",
            "version-control-git",
            "miscellaneous"
          ],
          "description": "Category for organizing the command"
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 200,
          "description": "Brief explanation of what the command does"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Command version in semantic versioning format"
        },
        "file": {
          "type": "string",
          "pattern": "^commands/[a-z0-9-]+\\.md$",
          "description": "Relative path to the command file"
        },
        "path": {
          "type": "string",
          "pattern": "^[a-z0-9-]+\\.md$",
          "description": "Filename of the command"
        },
        "argumentHint": {
          "type": "string",
          "description": "Hint about expected command arguments"
        },
        "model": {
          "type": "string",
          "enum": ["", "opus", "sonnet", "haiku"],
          "description": "Preferred model for this command"
        }
      },
      "required": ["name", "category", "description", "version", "file", "path", "argumentHint", "model"],
      "additionalProperties": false
    }
  }
}